"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ajax=function(b){return new Promise(function(t,o){var e=Object.prototype.toString.call(b).replace(/[\[\]]/g,"").substr(7);if("Object"!==e)throw new Error("Must be a  Object but a ")+e;var r={url:"",method:"get",responseType:"json",async:!0,data:{},headers:{"content-type":"application/x-www-form-urlencoded"},success:function(e){},error:function(e){}};for(k in b)"method"===k?r[k]=b[k].toLowerCase():r[k]=b[k];var n=r.url,s=r.method,e=r.async,a=r.data,c=r.headers,i=r.responseType,u=r.success,f=r.error,p=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("microsoft.XMLHTTP"),y="";if("{}"!==JSON.stringify(a)){for(k in a)y+=k+"="+a[k]+"&";y=y.substr(0,y.length-1)}if(p.open(s,n+(y&&"get"===s?"?"+y:""),e),"object"!==_typeof(c)&&(f("请求头传递的是一个空对象",p),"{}"===JSON.stringify(c)))throw o("headers must be a object but a "+_typeof(c)),new Error("headers must be a object but a "+_typeof(c));for(h in c)"content-type"===h.toLowerCase()&&"post"===s&&"{}"!==JSON.stringify(a)&&"application/json"===c[h].toLowerCase()&&(y=JSON.stringify(a)),p.setRequestHeader(h,c[h]);p.send("post"!==s?null:y),p.onreadystatechange=function(){if(4===p.readyState&&200===p.status){var e=p.responseText;switch(i.toLowerCase()){case"text":t(e),u(e);break;case"json":t(e),u(JSON.parse(e));break;default:t(e),u(e)}}},p.onerror=function(e){o(e,p),f(e,p)}})};