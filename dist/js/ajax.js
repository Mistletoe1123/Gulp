"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function core(e,t,o){console.log(t,o),console.log(e);var r=e.url,n=e.method,s=e.async,a=e.data,c=e.headers,i=e.success,p=e.responseType,f=e.error,u=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("microsoft.XMLHTTP"),y="";if("{}"!==JSON.stringify(a)){for(k in a)y+=k+"="+a[k]+"&";y=y.substr(0,y.length-1)}if(u.open(n,r+(y&&"get"===n?"?"+y:""),s),"object"!==_typeof(c))throw s&&o("headers expected object but got a "+_typeof(c)),new Error("headers expected object but got a "+_typeof(c));for(h in"{}"===JSON.stringify(c)&&f("请求头传递的是一个空对象",u),c)"content-type"===h.toLowerCase()&&"post"===n&&"{}"!==JSON.stringify(a)&&"application/json"===c[h].toLowerCase()&&(y=JSON.stringify(a)),u.setRequestHeader(h,c[h]);if(u.send("post"!==n?null:y),!s)return"json"===p?JSON.parse(u.responseText):u.responseText;u.onreadystatechange=function(){if(4===u.readyState&&200<=u.status&&u.status<300){var e=u.responseText;switch(p.toLowerCase()){case"text":i(e),s&&t(e);break;case"json":i(JSON.parse(e)),s&&t(JSON.parse(e));break;default:i(e),s&&t(e)}}},u.onerror=function(e){f(e,u),s&&o(e,u)}}function ajax(e){var t=Object.prototype.toString.call(e).replace(/[\[\]]/g,"").substr(7).toLowerCase();if("object"!==t)throw new Error("传入的必须是一个对象, the param expected a object,but got a "+t);var o={url:"",method:"get",responseType:"json",data:{},async:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},success:function(e){},error:function(e){}};for(k in e)"method"===k?o[k]=e[k].toLowerCase():o[k]=e[k];return o.async?new Promise(function(e,t){core(o,e,t)}):core(o)}